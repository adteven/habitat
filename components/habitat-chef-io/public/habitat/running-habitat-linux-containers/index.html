<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta name="robots" content="">
  <title>Running Chef Habitat Linux Containers</title>
  <link rel="shortcut icon" type="image/png" href="/images/favicon.ico" />
  
  
  <link rel="stylesheet" href="/sass/main.css" />
  <link rel="stylesheet" href="/css/habitat.css" />
</head>

<body>
  <a class="skip-main" href="#main-content-col">Skip to main content</a>

  <nav id="utility-bar" class = "show-for-medium">
    <div class="utility-bar-logo">
      <a href="/"><img src="/images/chef-logo.svg" alt="Chef Documentation" class="chef"></a>
    </div>

    <ul class="menu align-right top-nav">
      
      <li><a href="https://www.chef.io/">Chef.io</a></li>
      
      <li><a href="https://learn.chef.io/">Learn Chef</a></li>
      
      <li><a href="https://blog.chef.io/">Blog</a></li>
      
      <li><a href="https://community.chef.io/">Community</a></li>
      
      <li><a href="https://training.chef.io/">Training</a></li>
      
      <li><a href="https://downloads.chef.io/">Download</a></li>
      
    </ul>
</nav>

  <nav id="utility-bar" class = "show-for-small-only">
  <div class="">
    <button id="header-toggle" type="button" class="utility-bar-nav-bars " data-toggle="left-nav-off-canvas">
      <i class="fas fa-bars fa-lg"></i>
    </button>
    <div class="utility-bar-logo">
      <a href="/"><img src="/images/chef-logo.svg" alt="Chef Documentation" class="chef"></a>
    </div>
  </div>
</nav>


  <div id="left-nav-off-canvas" class="hide-for-medium" data-toggler=".reveal">
    


<aside class="sticky" data-sticky data-top-anchor="utility-bar:bottom" data-btm-anchor="footer:top" data-margin-top="0" data-margin-bottom="2">
  <div>
    <button class="close-button" data-toggle="left-nav-off-canvas">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <nav id="sidebar-nav" class="offCanvas">
    
      <div class="search">
        <form class="basic-form" method="" action="">
          <input type="text" class="st-default-search-input" placeholder="Search...">
        </form>
      </div>
    
    <div class="nav">
      <ul class="vertical menu accordion-menu" data-accordion-menu>
        
          
          
        
          
          
        
          
          
            
              <li>
                <a href="">chef_habitat</a>
                <ul class="menu vertical nested">
                  
                    
                      <li>
                        <a href="/habitat/" >
                          About Chef Habitat
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/community/" >
                          Chef Habitat Community
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/supported_platforms/" >
                          Supported Packages &amp; Platforms
                        </a>
                      </li>
                    
                  
                </ul>
              </li>
            
          
            
              <li>
                <a href="">chef_habitat/builder</a>
                <ul class="menu vertical nested">
                  
                    
                      <li>
                        <a href="/habitat/automated-builds/" >
                          Automated Builds
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/build-helpers/" >
                          Build Helpers
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/build-phase-callbacks/" >
                          Build Phase Callbacks
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/multiple-plans-builder/" >
                          Building Multiple Packages
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/habitat-and-continuous-integration/" >
                          Chef Habitat and Continuous Integration
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/builder-architecture/" >
                          Chef Habitat Builder Architecture
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/continuous-deployment/" >
                          Continuous Deployment
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/builder-account/" >
                          Create a Builder Account
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/builder-token/" >
                          Personal Access Token Management
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/builder-origin/" >
                          Create an Origin on Builder
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/origin-secrets/" >
                          Origin Secrets
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/sharing-pkgs/" >
                          Upload and Promote Packages
                        </a>
                      </li>
                    
                  
                </ul>
              </li>
            
          
            
              <li>
                <a href="">chef_habitat/containers</a>
                <ul class="menu vertical nested">
                  
                    
                      <li>
                        <a href="/habitat/ecs-and-habitat/" >
                          Amazon ECS and Chef Habitat
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/mesos-dcos/" >
                          Apache Mesos and DC/OS
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/habitat-and-orchestration/" >
                          Chef Habitat and Container Orchestration
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/habitat-and-containers/" >
                          Chef Habitat and Containers
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/habitat-and-others/" >
                          Chef Habitat and Other Software
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/habitat-and-provisioning/" >
                          Chef Habitat and Provisioning Tools
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/container-orchestration/" >
                          Container Orchestration
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/best-practices/" >
                          containers
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/gcr-and-habitat/" >
                          Google Container Registry (GCR)
                        </a>
                      </li>
                    
                  
                </ul>
              </li>
            
          
            
              <li>
                <a href="">chef_habitat/diagrams/package-build-flow</a>
                <ul class="menu vertical nested">
                  
                    
                      <li>
                        <a href="/habitat/package-build-flow/">Initial Package Build Flow</a>
                        <ul class="menu vertical nested">
                          
                            
                              <li>
                                <a href="/habitat/application-rebuild-flow/" >Application Rebuild Flow</a>
                              </li>
                            
                          
                            
                              <li>
                                <a href="/habitat/docker-automated-flow/" >Automate Docker Container Publishing Flow</a>
                              </li>
                            
                          
                            
                              <li>
                                <a href="/habitat/kubernetes-flow/" >Chef Habitat and Kubernetes Overview</a>
                              </li>
                            
                          
                            
                              <li>
                                <a href="/habitat/architecture-overview/" >Architecture Overview</a>
                              </li>
                            
                          
                            
                              <li>
                                <a href="/habitat/on-prem-flow/" >Chef Habitat Builder on-prem Flow</a>
                              </li>
                            
                          
                            
                              <li>
                                <a href="/habitat/dependency-update-flow/" >Dependency Update Flow</a>
                              </li>
                            
                          
                            
                              <li>
                                <a href="/habitat/docker-flow/" >Docker Container Publishing Flow</a>
                              </li>
                            
                          
                            
                              <li>
                                <a href="/habitat/runtime-binding/" >Runtime Services Group Binding</a>
                              </li>
                            
                          
                        </ul>
                      </li>
                    
                  
                </ul>
              </li>
            
          
            
              <li>
                <a href="">chef_habitat/get_started</a>
                <ul class="menu vertical nested">
                  
                    
                      <li>
                        <a href="/habitat/install-habitat/" >
                          Install Chef Habitat
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/configure-workstation/" >
                          Configure the Chef Habitat CLI
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/installing-packages/" >
                          Get Chef Habitat
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/accept-the-license/" >
                          Accept the License
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/install-faq/" >
                          Download and Install FAQ
                        </a>
                      </li>
                    
                  
                </ul>
              </li>
            
          
            
              <li>
                <a href="">chef_habitat/glossary</a>
                <ul class="menu vertical nested">
                  
                    
                      <li>
                        <a href="/habitat/application-lifecycle-hooks/" >
                          Application Lifecycle Hooks
                        </a>
                      </li>
                    
                  
                </ul>
              </li>
            
          
            
              <li>
                <a href="">chef_habitat/integrations</a>
                <ul class="menu vertical nested">
                  
                    
                      <li>
                        <a href="/habitat/aks-and-habitat/" >
                          Azure Container Services (AKS)
                        </a>
                      </li>
                    
                  
                </ul>
              </li>
            
          
            
              <li>
                <a href="">chef_habitat/overview</a>
                <ul class="menu vertical nested is-active">
                  
                    
                      <li>
                        <a href="/habitat/glossary-artifacts/" >
                          Artifacts
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/glossary-builder/" >
                          Builder
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/on-prem/" >
                          Builder on-prem
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/glossary-plan/" >
                          Chef Habitat Plans for Linux and Windows Systems
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/glossary-keys/" >
                          Keys
                        </a>
                      </li>
                    
                  
                    
                      <li class="active" >
                        <a href="/habitat/running-habitat-linux-containers/" >
                          Running Chef Habitat Linux Containers
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/running-habitat-servers/" >
                          Running Chef Habitat on Servers (Linux and Windows)
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/running-habitat-windows-containers/" >
                          Running Chef Habitat Windows Containers
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/glossary-services/" >
                          Services
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/glossary-studio/" >
                          Studio
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/glossary-supervisor/" >
                          Supervisor
                        </a>
                      </li>
                    
                  
                </ul>
              </li>
            
          
            
              <li>
                <a href="">chef_habitat/packages</a>
                <ul class="menu vertical nested">
                  
                    
                      <li>
                        <a href="/habitat/artifact-export-format/" >
                          Chef Habitat Artifact Export Formats
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/package-contents/" >
                          Chef Habitat Package Contents
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/developing-packages/" >
                          Developing Packages
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/iterative-development/" >
                          Iterative Package Development
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/pkg-exports/" >
                          Package Export Formats
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/using-packages/" >
                          Running Chef Habitat Packages
                        </a>
                      </li>
                    
                  
                </ul>
              </li>
            
          
            
              <li>
                <a href="">chef_habitat/pattern_library</a>
                <ul class="menu vertical nested">
                  
                    
                      <li>
                        <a href="/habitat/pattern-library/" >
                          Pattern Library
                        </a>
                      </li>
                    
                  
                </ul>
              </li>
            
          
            
              <li>
                <a href="">chef_habitat/plans</a>
                <ul class="menu vertical nested">
                  
                    
                      <li>
                        <a href="/habitat/planwriting-guide/" >
                          Advanced Plan Writing Guide
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/glossary-hooks/" >
                          Application Lifecycle Hooks
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/binary-wrapper/" >
                          Binary Wrapper Packages
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/plan-builds/" >
                          Build
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/plan-templates/" >
                          Configuration Templates
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/pkg-binds/" >
                          Service Binds
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/plan-helpers/" >
                          Plan Helpers
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/plan-settings/" >
                          Plan Settings
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/plan-variables/" >
                          Plan Variables
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/glossary-scaffolding/" >
                          Scaffolding
                        </a>
                      </li>
                    
                  
                </ul>
              </li>
            
          
            
              <li>
                <a href="">chef_habitat/reference</a>
                <ul class="menu vertical nested">
                  
                    
                      <li>
                        <a href="/habitat/reference/" >
                          Chef Habitat Reference Overview
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/using-custom-certs/" >
                          Custom Certificates
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/environment-variables/" >
                          Environment Variables
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/habitat-cli/" >
                          hab CLI Reference
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/template-data/" >
                          Runtime Configuration Settings
                        </a>
                      </li>
                    
                  
                </ul>
              </li>
            
          
            
              <li>
                <a href="">chef_habitat/services</a>
                <ul class="menu vertical nested">
                  
                    
                      <li>
                        <a href="/habitat/file-uploads/" >
                          File Uploads
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/monitor-services/" >
                          Monitoring Services
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/config-updates/" >
                          Service Updates
                        </a>
                      </li>
                    
                  
                </ul>
              </li>
            
          
            
              <li>
                <a href="">chef_habitat/supervisiors</a>
                <ul class="menu vertical nested">
                  
                    
                      <li>
                        <a href="/habitat/robust-supervisor-networks/" >
                          Supervisor Networks
                        </a>
                      </li>
                    
                  
                </ul>
              </li>
            
          
            
              <li>
                <a href="">chef_habitat/supervisor</a>
                <ul class="menu vertical nested">
                  
                    
                      <li>
                        <a href="/habitat/internals/" >
                          Chef Habitat Internals
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/glossary-launcher/" >
                          Launcher
                        </a>
                      </li>
                    
                  
                </ul>
              </li>
            
          
            
              <li>
                <a href="">chef_habitat/supervisors</a>
                <ul class="menu vertical nested">
                  
                    
                      <li>
                        <a href="/habitat/remote-control/" >
                          Control Supervisors Remotely
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/using-encryption/" >
                          Securing Supervisor Networks
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/using-updates/" >
                          Service Group Update Strategy
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/setting-up-a-ring/" >
                          Setting Up a Ring
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/sup-log-configuration/" >
                          Supervisor Log Configuration
                        </a>
                      </li>
                    
                  
                    
                      <li>
                        <a href="/habitat/sup-log-keys/" >
                          Supervisor Log Key
                        </a>
                      </li>
                    
                  
                </ul>
              </li>
            
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
      </ul>
      <ul class="vertical menu accordion-menu show-for-small-only" data-accordion-menu>
        
          <li>
            <a href="https://www.chef.io/"  class="external" target="_blank">
            Chef.io
          </a>
          </li>
        
          <li>
            <a href="https://learn.chef.io/"  class="external" target="_blank">
            Learn Chef
          </a>
          </li>
        
          <li>
            <a href="https://blog.chef.io/"  class="external" target="_blank">
            Blog
          </a>
          </li>
        
          <li>
            <a href="https://community.chef.io/"  class="external" target="_blank">
            Community
          </a>
          </li>
        
          <li>
            <a href="https://training.chef.io/"  class="external" target="_blank">
            Training
          </a>
          </li>
        
          <li>
            <a href="https://downloads.chef.io/"  class="external" target="_blank">
            Download
          </a>
          </li>
        
      </ul>
    </div>
  </nav>
</aside>

  </div>

  <div class="off-canvas-wrapper">
    <div class="grid-container">
      <div class="grid-x">

        <div class="cell position-left off-canvas-absolute reveal-for-medium col-sidebar" id="left-nav-on-canvas" data-off-canvas data-transition="overlap" >
            


<aside class="sticky sidebar" data-sticky data-top-anchor="utility-bar:bottom" data-btm-anchor="footer:top">
  <nav id="sidebar-nav">
    <div class="nav">
      <ul class="vertical menu accordion-menu" data-accordion-menu>
        
          
          
        
          
          
        
          
          
            
              <li>

                <a href="">chef_habitat</a>
                <span class="menu_weight">Weight: 0</span>

                <ul class="menu vertical nested is-active">
                  
                    
                      <li  >
                        
                          <a href="/habitat/">About Chef Habitat</a>
                        
                        <span class="menu_weight">Weight: 10</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/community/">Chef Habitat Community</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/supported_platforms/">Supported Packages &amp; Platforms</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                </ul>
              </li>
            
          
            
              <li>

                <a href="">chef_habitat/builder</a>
                <span class="menu_weight">Weight: 0</span>

                <ul class="menu vertical nested is-active">
                  
                    
                      <li  >
                        
                          <a href="/habitat/automated-builds/">Automated Builds</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/build-helpers/">Build Helpers</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/build-phase-callbacks/">Build Phase Callbacks</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/multiple-plans-builder/">Building Multiple Packages</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/habitat-and-continuous-integration/">Chef Habitat and Continuous Integration</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/builder-architecture/">Chef Habitat Builder Architecture</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/continuous-deployment/">Continuous Deployment</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/builder-account/">Create a Builder Account</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/builder-token/">Personal Access Token Management</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/builder-origin/">Create an Origin on Builder</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/origin-secrets/">Origin Secrets</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/sharing-pkgs/">Upload and Promote Packages</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                </ul>
              </li>
            
          
            
              <li>

                <a href="">chef_habitat/containers</a>
                <span class="menu_weight">Weight: 0</span>

                <ul class="menu vertical nested is-active">
                  
                    
                      <li  >
                        
                          <a href="/habitat/ecs-and-habitat/">Amazon ECS and Chef Habitat</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/mesos-dcos/">Apache Mesos and DC/OS</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/habitat-and-orchestration/">Chef Habitat and Container Orchestration</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/habitat-and-containers/">Chef Habitat and Containers</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/habitat-and-others/">Chef Habitat and Other Software</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/habitat-and-provisioning/">Chef Habitat and Provisioning Tools</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/container-orchestration/">Container Orchestration</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/best-practices/">containers</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/gcr-and-habitat/">Google Container Registry (GCR)</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                </ul>
              </li>
            
          
            
              <li>

                <a href="">chef_habitat/diagrams/package-build-flow</a>
                <span class="menu_weight">Weight: 0</span>

                <ul class="menu vertical nested is-active">
                  
                    
                      <li>
                        <a href="/habitat/package-build-flow/">Initial Package Build Flow</a>
                        <span class = "menu_weight">Weight: 20</span>

                        <ul class="menu vertical nested">
                          

                            
                              <li>
                                
                                  <a href="/habitat/application-rebuild-flow/">Application Rebuild Flow</a>
                                
                                <span class="menu_weight">Weight: 20</span>
                              </li>
                            
                          

                            
                              <li>
                                
                                  <a href="/habitat/docker-automated-flow/">Automate Docker Container Publishing Flow</a>
                                
                                <span class="menu_weight">Weight: 20</span>
                              </li>
                            
                          

                            
                              <li>
                                
                                  <a href="/habitat/kubernetes-flow/">Chef Habitat and Kubernetes Overview</a>
                                
                                <span class="menu_weight">Weight: 20</span>
                              </li>
                            
                          

                            
                              <li>
                                
                                  <a href="/habitat/architecture-overview/">Architecture Overview</a>
                                
                                <span class="menu_weight">Weight: 20</span>
                              </li>
                            
                          

                            
                              <li>
                                
                                  <a href="/habitat/on-prem-flow/">Chef Habitat Builder on-prem Flow</a>
                                
                                <span class="menu_weight">Weight: 20</span>
                              </li>
                            
                          

                            
                              <li>
                                
                                  <a href="/habitat/dependency-update-flow/">Dependency Update Flow</a>
                                
                                <span class="menu_weight">Weight: 20</span>
                              </li>
                            
                          

                            
                              <li>
                                
                                  <a href="/habitat/docker-flow/">Docker Container Publishing Flow</a>
                                
                                <span class="menu_weight">Weight: 20</span>
                              </li>
                            
                          

                            
                              <li>
                                
                                  <a href="/habitat/runtime-binding/">Runtime Services Group Binding</a>
                                
                                <span class="menu_weight">Weight: 20</span>
                              </li>
                            
                          
                        </ul>
                      </li>
                    
                  
                </ul>
              </li>
            
          
            
              <li>

                <a href="">chef_habitat/get_started</a>
                <span class="menu_weight">Weight: 0</span>

                <ul class="menu vertical nested is-active">
                  
                    
                      <li  >
                        
                          <a href="/habitat/install-habitat/">Install Chef Habitat</a>
                        
                        <span class="menu_weight">Weight: 10</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/configure-workstation/">Configure the Chef Habitat CLI</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/installing-packages/">Get Chef Habitat</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/accept-the-license/">Accept the License</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/install-faq/">Download and Install FAQ</a>
                        
                        <span class="menu_weight">Weight: 30</span>
                      </li>
                    
                  
                </ul>
              </li>
            
          
            
              <li>

                <a href="">chef_habitat/glossary</a>
                <span class="menu_weight">Weight: 0</span>

                <ul class="menu vertical nested is-active">
                  
                    
                      <li  >
                        
                          <a href="/habitat/application-lifecycle-hooks/">Application Lifecycle Hooks</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                </ul>
              </li>
            
          
            
              <li>

                <a href="">chef_habitat/integrations</a>
                <span class="menu_weight">Weight: 0</span>

                <ul class="menu vertical nested is-active">
                  
                    
                      <li  >
                        
                          <a href="/habitat/aks-and-habitat/">Azure Container Services (AKS)</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                </ul>
              </li>
            
          
            
              <li>

                <a href="">chef_habitat/overview</a>
                <span class="menu_weight">Weight: 0</span>

                <ul class="menu vertical nested is-active">
                  
                    
                      <li  >
                        
                          <a href="/habitat/glossary-artifacts/">Artifacts</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/glossary-builder/">Builder</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/on-prem/">Builder on-prem</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/glossary-plan/">Chef Habitat Plans for Linux and Windows Systems</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/glossary-keys/">Keys</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  class="active"  >
                        
                          <a href="/habitat/running-habitat-linux-containers/">Running Chef Habitat Linux Containers</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/running-habitat-servers/">Running Chef Habitat on Servers (Linux and Windows)</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/running-habitat-windows-containers/">Running Chef Habitat Windows Containers</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/glossary-services/">Services</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/glossary-studio/">Studio</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/glossary-supervisor/">Supervisor</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                </ul>
              </li>
            
          
            
              <li>

                <a href="">chef_habitat/packages</a>
                <span class="menu_weight">Weight: 0</span>

                <ul class="menu vertical nested is-active">
                  
                    
                      <li  >
                        
                          <a href="/habitat/artifact-export-format/">Chef Habitat Artifact Export Formats</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/package-contents/">Chef Habitat Package Contents</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/developing-packages/">Developing Packages</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/iterative-development/">Iterative Package Development</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/pkg-exports/">Package Export Formats</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/using-packages/">Running Chef Habitat Packages</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                </ul>
              </li>
            
          
            
              <li>

                <a href="">chef_habitat/pattern_library</a>
                <span class="menu_weight">Weight: 0</span>

                <ul class="menu vertical nested is-active">
                  
                    
                      <li  >
                        
                          <a href="/habitat/pattern-library/">Pattern Library</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                </ul>
              </li>
            
          
            
              <li>

                <a href="">chef_habitat/plans</a>
                <span class="menu_weight">Weight: 0</span>

                <ul class="menu vertical nested is-active">
                  
                    
                      <li  >
                        
                          <a href="/habitat/planwriting-guide/">Advanced Plan Writing Guide</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/glossary-hooks/">Application Lifecycle Hooks</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/binary-wrapper/">Binary Wrapper Packages</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/plan-builds/">Build</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/plan-templates/">Configuration Templates</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/pkg-binds/">Service Binds</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/plan-helpers/">Plan Helpers</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/plan-settings/">Plan Settings</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/plan-variables/">Plan Variables</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/glossary-scaffolding/">Scaffolding</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                </ul>
              </li>
            
          
            
              <li>

                <a href="">chef_habitat/reference</a>
                <span class="menu_weight">Weight: 0</span>

                <ul class="menu vertical nested is-active">
                  
                    
                      <li  >
                        
                          <a href="/habitat/reference/">Chef Habitat Reference Overview</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/using-custom-certs/">Custom Certificates</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/environment-variables/">Environment Variables</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/habitat-cli/">hab CLI Reference</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/template-data/">Runtime Configuration Settings</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                </ul>
              </li>
            
          
            
              <li>

                <a href="">chef_habitat/services</a>
                <span class="menu_weight">Weight: 0</span>

                <ul class="menu vertical nested is-active">
                  
                    
                      <li  >
                        
                          <a href="/habitat/file-uploads/">File Uploads</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/monitor-services/">Monitoring Services</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/config-updates/">Service Updates</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                </ul>
              </li>
            
          
            
              <li>

                <a href="">chef_habitat/supervisiors</a>
                <span class="menu_weight">Weight: 0</span>

                <ul class="menu vertical nested is-active">
                  
                    
                      <li  >
                        
                          <a href="/habitat/robust-supervisor-networks/">Supervisor Networks</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                </ul>
              </li>
            
          
            
              <li>

                <a href="">chef_habitat/supervisor</a>
                <span class="menu_weight">Weight: 0</span>

                <ul class="menu vertical nested is-active">
                  
                    
                      <li  >
                        
                          <a href="/habitat/internals/">Chef Habitat Internals</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/glossary-launcher/">Launcher</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                </ul>
              </li>
            
          
            
              <li>

                <a href="">chef_habitat/supervisors</a>
                <span class="menu_weight">Weight: 0</span>

                <ul class="menu vertical nested is-active">
                  
                    
                      <li  >
                        
                          <a href="/habitat/remote-control/">Control Supervisors Remotely</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/using-encryption/">Securing Supervisor Networks</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/using-updates/">Service Group Update Strategy</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/setting-up-a-ring/">Setting Up a Ring</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/sup-log-configuration/">Supervisor Log Configuration</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                    
                      <li  >
                        
                          <a href="/habitat/sup-log-keys/">Supervisor Log Key</a>
                        
                        <span class="menu_weight">Weight: 20</span>
                      </li>
                    
                  
                </ul>
              </li>
            
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
      </ul>
    </div>
  </nav>
</aside>

        </div>

        <div id="main-content" class="cell off-canvas-content cell auto" data-off-canvas-content>
            
<main id="main-content-col" tabindex="-1">
<div class="col-content">
  <div id="running-chef-habitat-linux-containers"><h1>Running Chef Habitat Linux Containers</h1></div>

  
  
    <button type="button" class="TOC-button hide-for-large" data-toggle="offCanvasRightTOC" data-close="left-nav-off-canvas">
      <i class="fas fa-bars"></i> Table of Contents
    </button>
  
    <div class="prose">
      <h1 id="a-namerunning-habitat-linux-containers-idrunning-habitat-linux-containers-data-magellan-targetrunning-habitat-linux-containersrunning-chef-habitat-linux-containersa"><a name="running-habitat-linux-containers" id="running-habitat-linux-containers" data-magellan-target="running-habitat-linux-containers">Running Chef Habitat Linux Containers</a></h1>
<h2 id="container-setup-and-assumptions">Container Setup and Assumptions</h2>
<p>When you run <code>hab pkg export docker</code>, you&rsquo;ll get a Docker container that provides a few things. First, a minimal Linux OS filesystem is provided, with just enough configuration (e.g., <code>/etc/passwd</code>, <code>/etc/resolv.conf</code>, etc.) to run. Second, the contents of the exported Chef Habitat package, along with its complete dependency tree, as well as a complete Chef Habitat Supervisor installation, are provided, unpacked, in the <code>/hab/pkgs</code> directory. Finally, an entry-point script that will start the Supervisor, running the exported Chef Habitat package, is provided, allowing the container itself to behave as though it were the Supervisor.</p>
<p>On Linux, the Chef Habitat Supervisor will normally run as the <code>root</code> user, and will start Chef Habitat services as the <code>pkg_svc_user</code> specified by that service. However, in some deployment scenarios, it undesirable&ndash;or even impossible&ndash;to run the Supervisor as <code>root</code>. The <a href="https://www.openshift.com/">OpenShift</a> container platform, for instance, does not run containers as <code>root</code> by default, but as randomly-chosen anonymous user IDs. From version 0.53.0 onward, the Chef Habitat Supervisor can now run as an arbitrary user, providing users with more flexibility in how and where the use Chef Habitat.</p>
<p>In order to support this in containers and provide maximal flexibility, the contents of the <code>/hab</code> directory are both readable <em>and writable</em> by the <code>root</code> <em>group</em>. When specifying a user to run a container process as, the user&rsquo;s primary group will be reported as <code>root</code> if no matching group can be found in <code>/etc/group</code>. This will allow the user to create and populate the <code>/hab/sup</code> directory for managing Supervisor state, as well as the <code>/hab/svc</code> directory, which will contain all the service&rsquo;s state. This is in line with <a href="https://docs.openshift.com/container-platform/3.3/creating_images/guidelines.html#openshift-container-platform-specific-guidelines">recommendations from OpenShift</a> on how to create containers that can run as a non-root user, but nothing in Chef Habitat&rsquo;s implementation is specific to OpenShift; indeed, all the examples provided below use pure Docker.</p>
<h2 id="caveats-to-running-as-a-non-root-user">Caveats to Running as a Non-root User</h2>
<p>&ldquo;There&rsquo;s no such thing as a free lunch&rdquo;, as the saying goes, and that holds true here. If the Supervisor is running as a non-root user, any processes that it supervises will be run as the same user; any values that the process might specify via <code>pkg_svc_user</code> and <code>pkg_svc_group</code> are essentially ignored. Furthermore, any files written out by the service during its operation are also owned by that same user.</p>
<h3 id="details">Details</h3>
<p>Actually, the Supervisor does not care what user it is running as; rather, it uses Linux capabilities to guide its behavior. If the process has the <code>CAP_SETUID</code>, <code>CAP_SETGID</code>, and <code>CAP_CHOWN</code> capabilities, it will be able to run processes as the specified <code>pkg_svc_user</code> and <code>pkg_svc_group</code> (<code>CAP_CHOWN</code> is needed to ensure that the service processes can read and write files within the service&rsquo;s state directories). The Supervisor checks for the presence of these capabilities, and does not rely on having a user ID of 0 or the username <code>root</code>.</p>
<h2 id="container-deployment-scenarios">Container Deployment Scenarios</h2>
<h3 id="running-a-chef-habitat-container-as-a-root-user">Running a Chef Habitat Container as a Root User</h3>
<p>This is the base case. If you are fine with running your container as <code>root</code>, you can do that directly:</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">docker run --rm -it core/redis:latest
</code></pre></div><p>Here, <code>core/redis:latest</code> would be the image exported from the <code>core/redis</code> Chef Habitat package. The Supervisor will run as normal, with supervised processes running as the desired user.</p>
<h3 id="running-a-chef-habitat-container-as-a-non-root-user">Running a Chef Habitat Container as a Non-root User</h3>
<p>If you cannot run as the <code>root</code> user, but you are fine with <code>root</code> being the container user&rsquo;s primary group, you can simply specify a user ID to run as. This user need not exist in the container itself, and it&rsquo;s better if it doesn&rsquo;t. Using pure Docker, it might look like this:</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">docker run --rm -it --user<span style="color:#666">=</span><span style="color:#40a070">888888</span> core/redis:latest
</code></pre></div><p>Again, we use our <code>core/redis</code> Chef Habitat package container; the user ID 888888 is simply a number chosen at random (this is how platforms like OpenShift operate). No user inside the container has this ID, meaning that the user will be an anonymous user with <code>root</code> as its primary group. Because of how we generate Chef Habitat containers, this fact ensures that the user has write permissions within the <code>/hab</code> directory.</p>
<p>Due to the current logic around package installation, there is an extra step needed if you would like to have your containerized Supervisors update either themselves or the services they supervise. When installing packages as a non-root user, Chef Habitat will download the origin keys and compressed hart files into the user&rsquo;s <code>${HOME}/.hab</code> directory, rather than the global <code>/hab/cache</code> directory. You will need to ensure that a user-writable directory is mounted into the container, and specify it as the user&rsquo;s home directory using the <code>HOME</code> environment variable. Using pure Docker with a volume that is accessible by the user, that might look like this:</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">docker volume create --driver <span style="color:#007020">local</span> <span style="color:#4070a0;font-weight:bold">\\</span>
       --opt <span style="color:#bb60d5">type</span><span style="color:#666">=</span>tmpfs <span style="color:#4070a0;font-weight:bold">\\</span>
       --opt <span style="color:#bb60d5">device</span><span style="color:#666">=</span>tmpfs <span style="color:#4070a0;font-weight:bold">\\</span>
       --opt <span style="color:#bb60d5">o</span><span style="color:#666">=</span><span style="color:#bb60d5">size</span><span style="color:#666">=</span>100m,uid<span style="color:#666">=</span><span style="color:#40a070">888888</span> <span style="color:#4070a0;font-weight:bold">\\</span>
       test_home

docker run --rm -it <span style="color:#4070a0;font-weight:bold">\\</span>
       --user<span style="color:#666">=</span><span style="color:#40a070">888888</span> <span style="color:#4070a0;font-weight:bold">\\</span>
       --mount <span style="color:#bb60d5">type</span><span style="color:#666">=</span>volume,src<span style="color:#666">=</span>test_home,dst<span style="color:#666">=</span>/myhome <span style="color:#4070a0;font-weight:bold">\\</span>
       --env <span style="color:#bb60d5">HOME</span><span style="color:#666">=</span>/myhome <span style="color:#4070a0;font-weight:bold">\\</span>
       core/redis:latest --auto-update --strategy<span style="color:#666">=</span>at-once
</code></pre></div><p>This is merely an illustration; use whatever volume management approaches and service update strategies that are appropriate for your container scheduling system and your local deployment.</p>
<p>As illustrated, updates of this kind are completely optional; you may prefer to move update responsibility to your container scheduler and treat your containers as immutable in this regard.</p>
<h2 id="running-a-chef-habitat-container-as-a-non-root-user-in-a-non-root-group">Running a Chef Habitat Container as a Non-root User in a Non-root Group</h2>
<p>If for whatever reason you do not want your user to be in the <code>root</code> group inside the container, you will need to add some additional volumes in order to create the needed directories. However, since you will (by definition) not have write permissions on the <code>/hab</code> directory as a whole, your Supervisor <em>will not</em> be able to update either itself or the services it supervises.</p>
<p>To implement this using pure Docker, you could do something like this (the group ID of <code>999999</code> was again chosen arbitrarily, as with the user ID):</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">docker volume create --driver <span style="color:#007020">local</span> <span style="color:#4070a0;font-weight:bold">\\</span>
       --opt <span style="color:#bb60d5">type</span><span style="color:#666">=</span>tmpfs <span style="color:#4070a0;font-weight:bold">\\</span>
       --opt <span style="color:#bb60d5">device</span><span style="color:#666">=</span>tmpfs <span style="color:#4070a0;font-weight:bold">\\</span>
       --opt <span style="color:#bb60d5">o</span><span style="color:#666">=</span><span style="color:#bb60d5">size</span><span style="color:#666">=</span>100m,uid<span style="color:#666">=</span><span style="color:#40a070">888888</span> <span style="color:#4070a0;font-weight:bold">\\</span>
       sup_state

docker volume create --driver <span style="color:#007020">local</span> <span style="color:#4070a0;font-weight:bold">\\</span>
       --opt <span style="color:#bb60d5">type</span><span style="color:#666">=</span>tmpfs <span style="color:#4070a0;font-weight:bold">\\</span>
       --opt <span style="color:#bb60d5">device</span><span style="color:#666">=</span>tmpfs <span style="color:#4070a0;font-weight:bold">\\</span>
       --opt <span style="color:#bb60d5">o</span><span style="color:#666">=</span><span style="color:#bb60d5">size</span><span style="color:#666">=</span>100m,uid<span style="color:#666">=</span><span style="color:#40a070">888888</span> <span style="color:#4070a0;font-weight:bold">\\</span>
       svc_state

docker volume create --driver <span style="color:#007020">local</span> <span style="color:#4070a0;font-weight:bold">\\</span>
       --opt <span style="color:#bb60d5">type</span><span style="color:#666">=</span>tmpfs <span style="color:#4070a0;font-weight:bold">\\</span>
       --opt <span style="color:#bb60d5">device</span><span style="color:#666">=</span>tmpfs <span style="color:#4070a0;font-weight:bold">\\</span>
       --opt <span style="color:#bb60d5">o</span><span style="color:#666">=</span><span style="color:#bb60d5">size</span><span style="color:#666">=</span>100m,uid<span style="color:#666">=</span><span style="color:#40a070">888888</span> <span style="color:#4070a0;font-weight:bold">\\</span>
       launcher_state

docker run --rm -it <span style="color:#4070a0;font-weight:bold">\\</span>
       --user<span style="color:#666">=</span>888888:999999 <span style="color:#4070a0;font-weight:bold">\\</span>
       --mount <span style="color:#bb60d5">type</span><span style="color:#666">=</span>volume,src<span style="color:#666">=</span>sup_state,dst<span style="color:#666">=</span>/hab/sup <span style="color:#4070a0;font-weight:bold">\\</span>
       --mount <span style="color:#bb60d5">type</span><span style="color:#666">=</span>volume,src<span style="color:#666">=</span>svc_state,dst<span style="color:#666">=</span>/hab/svc <span style="color:#4070a0;font-weight:bold">\\</span>
       --mount <span style="color:#bb60d5">type</span><span style="color:#666">=</span>volume,src<span style="color:#666">=</span>launcher_state,dst<span style="color:#666">=</span>/hab/launcher <span style="color:#4070a0;font-weight:bold">\\</span>
       core/redis:latest
</code></pre></div><p>Again, this is just an illustrative example; use the appropriate strategies for your specific circumstances. The key information here is to ensure that the <code>/hab/sup</code>, <code>/hab/svc</code>, and <code>/hab/launcher</code> directories are writable by the user inside the container.</p>

    </div>
  </div>
</main>

        </div>

        
        
          <div class="cell off-canvas position-right toc off-canvas-absolute reveal-for-large" id="onCanvasRightTOC" data-off-canvas >
            <aside class="sticky sidebar" data-sticky data-top-anchor="utility-bar:bottom" data-btm-anchor="footer:top">
  <span>
    <strong>
      <h4 class="mini-toc-header">Table Of Contents</h4>
    </strong>
    <button class="close-button hide-for-large" aria-label="Close menu" type="button" data-close>
      <span aria-hidden="true">&times;</span>
    </button>
  </span>
  <a href="#running-chef-habitat-linux-containers">Running Chef Habitat Linux Containers</a><nav id="TableOfContents">
  <ul>
    <li><a href="#a-namerunning-habitat-linux-containers-idrunning-habitat-linux-containers-data-magellan-targetrunning-habitat-linux-containersrunning-chef-habitat-linux-containersa"><a name="running-habitat-linux-containers" id="running-habitat-linux-containers" data-magellan-target="running-habitat-linux-containers">Running Chef Habitat Linux Containers</a></a>
      <ul>
        <li><a href="#container-setup-and-assumptions">Container Setup and Assumptions</a></li>
        <li><a href="#caveats-to-running-as-a-non-root-user">Caveats to Running as a Non-root User</a>
          <ul>
            <li><a href="#details">Details</a></li>
          </ul>
        </li>
        <li><a href="#container-deployment-scenarios">Container Deployment Scenarios</a>
          <ul>
            <li><a href="#running-a-chef-habitat-container-as-a-root-user">Running a Chef Habitat Container as a Root User</a></li>
            <li><a href="#running-a-chef-habitat-container-as-a-non-root-user">Running a Chef Habitat Container as a Non-root User</a></li>
          </ul>
        </li>
        <li><a href="#running-a-chef-habitat-container-as-a-non-root-user-in-a-non-root-group">Running a Chef Habitat Container as a Non-root User in a Non-root Group</a></li>
      </ul>
    </li>
  </ul>
</nav></aside>

          </div>
        

      </div>
    </div>
  </div>

  
  

    <div class="off-canvas position-right toc off-canvas-absolute hide-for-large" id="offCanvasRightTOC" data-off-canvas
      data-transition="overlap">
      <aside class="sticky sidebar" data-sticky data-top-anchor="utility-bar:bottom" data-btm-anchor="footer:top">
  <span>
    <strong>
      <h4 class="mini-toc-header">Table Of Contents</h4>
    </strong>
    <button class="close-button hide-for-large" aria-label="Close menu" type="button" data-close>
      <span aria-hidden="true">&times;</span>
    </button>
  </span>
  <a href="#running-chef-habitat-linux-containers">Running Chef Habitat Linux Containers</a><nav id="TableOfContents">
  <ul>
    <li><a href="#a-namerunning-habitat-linux-containers-idrunning-habitat-linux-containers-data-magellan-targetrunning-habitat-linux-containersrunning-chef-habitat-linux-containersa"><a name="running-habitat-linux-containers" id="running-habitat-linux-containers" data-magellan-target="running-habitat-linux-containers">Running Chef Habitat Linux Containers</a></a>
      <ul>
        <li><a href="#container-setup-and-assumptions">Container Setup and Assumptions</a></li>
        <li><a href="#caveats-to-running-as-a-non-root-user">Caveats to Running as a Non-root User</a>
          <ul>
            <li><a href="#details">Details</a></li>
          </ul>
        </li>
        <li><a href="#container-deployment-scenarios">Container Deployment Scenarios</a>
          <ul>
            <li><a href="#running-a-chef-habitat-container-as-a-root-user">Running a Chef Habitat Container as a Root User</a></li>
            <li><a href="#running-a-chef-habitat-container-as-a-non-root-user">Running a Chef Habitat Container as a Non-root User</a></li>
          </ul>
        </li>
        <li><a href="#running-a-chef-habitat-container-as-a-non-root-user-in-a-non-root-group">Running a Chef Habitat Container as a Non-root User in a Non-root Group</a></li>
      </ul>
    </li>
  </ul>
</nav></aside>

    </div>

  

  <div id="footer" class="cell small-12">
    <div class="grid-x">
      <div class="cell small-12">
        <nav>
          
<footer id="footer">
  <div class="grid-container">
    <div class="grid-x align-middle">
      <div class="cell small-12 large-3 logo"><a href="/"><img src="/images/chef-logo-light.svg" alt="Habitat Documentation"></a></div>
      <div class="cell small-12 large-9">
        <ul class="menu vertical medium-horizontal">
          <li><a href="/sitemap/" target="_self">Site Map</a></li>
          <li><a href="https://www.chef.io/online-master-agreement/" target="_blank">Licensing</a></li>
          <li><a href="https://www.chef.io/terms-of-service/" target="_blank">Terms &amp; Conditions</a></li>
          <li><a href="https://www.chef.io/trademark-policy/" target="_blank">Trademark Policy</a></li>
          <li><a href="https://www.chef.io/privacy-policy/" target="_blank">Privacy Policy</a></li>
          <li><a href="https://www.chef.io/cookie-policy/" target="_blank">Cookie Policy</a></li>
        </ul>
        
          <p class="modified">Page Last Modified: 0001-01-01 00:00:00 &#43;0000 UTC</p>
        
        <p class="legal">&copy; 2008-2020 Chef Software, Inc. All Rights Reserved.</p>
      </div>
    </div>
  </div>
</footer>

        </nav>
      </div>
    </div>
  </div>
  
<script src="/js/core-bundle.min.b46adaaa9b34baa80cf4b98cb38321e111475886368cfc1e52ed3afcc03b5b22.js" type="text/javascript"></script>
<script src="/js/custom-bundle.min.e560508c0a1795f3e94b9dc46263787768b40136412317331f860cdc22837c6a.js" type="text/javascript"></script>
<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');
  
  _st('install','s1Pemn_yrUKJw9_K5zRT','2.0.0');
</script>

  </body>
</html>
